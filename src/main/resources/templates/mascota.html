<!DOCTYPE html>
<html lang="es" xmlns:th="https://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/extras/spring-security">

<header>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
		rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
		crossorigin="anonymous">
	<link rel="stylesheet" href="../css/registro.css">

	<title>Tinder de mascotas</title>
</header>
<!-- navbar -->
<body>
	<section>
			<nav class="navbar navbar-light bg-danger">
			<div class="container-fluid">
				<a th:href="@{/index}" class="navbar-brand mb-2 h1 text-white">TinderDog</a>
				<img
					src="https://www.miperroyyo.com.ar/wp-content/uploads/2018/01/logotipo-miperroyyo-trans.png"
					alt="WM" width="100" height="60" />
				<!-- class="d-inline-block align-text-top" -->
				<div class="d-flex flex-row-reverse">
				
						<a th:href="@{/logout}" class="navbar-brand mb-2 h1 text-white" sec:authorize="isAuthenticated()">Salir</a>
						<a
						th:href="@{/nosotros}" class="navbar-brand mb-2 h1 text-white">Nosotros</a>
					 	
				</div>
			</div>
		</nav>
	</section>


<section class="vh-100 gradient-custom">
		<div class="container py-4 h-100">
			<div class="row justify-content-center align-items-center h-100">
				<div class="col-12 col-lg-9 col-xl-7">
					<div class="card shadow-2-strong card-registration"
						style="border-radius: 15px;">
						<div class="card-body p-4 p-md-5">
							<h3 class="mb-4 pb-2 pb-md-0 mb-md-5"><span th:text="${accion}"></span>Mascota</h3> <!-- Se evalua si ya hay una mascota o no -->
	
	<form enctype="multipart/form-data"> <!--accion que actualiza el perfil -->
			<!--MENSAJE DE ERROR  -->
			<p  class="alert alert-danger"  th:if="${error !=null}" th:text="${error}"></p>
			
		<div class="row">
				<div class="col-md-12 mb-4">
					<div class="form-outline">

					<!--  -->	
					<img th:if="${perfil.foto != null}" class="img-fluid rounded-cicle" th:src="${'/foto/mascota/' + perfil.id}" alt="Esto es una imagen"><!-- Si el perfil tiene una foto se muestra -->
					
					<img th:if="${perfil.foto == null}" class="img-fluid rounded-cicle" src="https://us.123rf.com/450wm/tcheres/tcheres1709/tcheres170900013/85937987-silueta-de-un-perro-ilustraci%C3%B3n-vectorial-de-doberman-pinscher-.jpg?ver=6"><!-- Si el perfil tiene una foto se muestra -->
					
					<input hidden  name="id"   th:value="${perfil.id}" />
					<label class="form-label fw-bold d-block" >Nombre de la mascota:</label> 
					<input type="text" name="nombre"  class="form-control form-control-lg" id="firstName" placeholder="Nombre.." th:value="${perfil.nombre}"  /> 
					<!--  -->	
					<label class="form-label fw-bold" >Tipo:</label><br> 
					<select name="tipo" class="form-label fw-bold"th:disabled="${accion=='Eliminar'}"> 
					<option th:each="tipo : ${tipos}" th:value=${tipo} th:text="${tipo}" th:selected="${perfil.tipo != null && tipo == perfil.tipo}" ></option> <!-- llamamos a los enum de tipos-->		
					</select> <br>	
					<!--  -->	
					<label class="form-label fw-bold" >Sexo</label><br> 
					<select name="sexo" class="form-label fw-bold" th:disabled="${accion=='Eliminar'}"> 
					<option th:each="sexo : ${sexos}" th:value=${sexo} th:text="${sexo}" th:selected="${perfil.sexo != null && sexo == perfil.sexo}" ></option> <!-- llamamos a los enum de sexo-->		
					</select> <br>					
					<label  th:if="${accion != 'Eliminar'}" class="form-label fw-bold" >Foto:</label> 
					<input type="file"  class="form-control form-control-lg"  name="archivo" th:if="${accion != 'Eliminar'}"> 
					<!--  -->					
				
					<br>
					<button  type="submit" class="btn btn-primary" formaction="/mascota/mis-mascotas" formmethod="GET">Volver</button>
					<button  type="submit" class="btn btn-primary" th:if="${accion == 'Crear'} " formaction="/mascota/actualizar-perfil" formmethod="POST">Crear Mascota</button>
					<button type="submit" class="btn btn-primary" th:if="${accion == 'Actualizar'} "formaction="/mascota/actualizar-perfil" formmethod="POST">Actualizar Mascota</button>
					<button type="submit" class="btn btn-danger" th:if="${accion == 'Eliminar'}" formaction="/mascota/eliminar-perfil" formmethod="POST">Eliminar Mascota</button>
							</form>
							
						</div>
					</div>
						</div>
					</div>
					</div>
					
				
	</section>
	


	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
		integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
		integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
		crossorigin="anonymous"></script>


</body>

</html>